<!doctype html>
<html lang="ko">
  <head>
    @@include("_include/_head.html")
    <link rel="stylesheet" type="text/css" href="./assets/css/main.css" />
  </head>
  <body>
    <div class="wrap main">
      @@include("_include/_header.html")
      <!-- container -->
      <div class="container">
        <div class="bg-circle">
          <ul>
            <li><div></div></li>
            <li></li>
            <li></li>
            <li></li>
          </ul>
        </div>
        <div class="learning-area">
          <svg
            id="gauge"
            viewBox="0 0 794 460"
            preserveAspectRatio="xMidYMid meet"
          ></svg>
        </div>
        <div class="main-contents">
          <div class="text-box">
            <span><em>홍길동</em> 선임연구원님</span>
            <div class="keyword-area">
              <button id="keywordSettingsBtn">
                나의 키워드 <i class="ico-setting"></i>
              </button>
              <div class="keyword-list" id="myKeyword">
                <label class="kw-allow" for="chk1">
                  <input type="checkbox" id="chk1" />
                  #인물
                </label>
                <label class="kw-allow" for="chk2">
                  <input type="checkbox" id="chk2" checked />
                  #소통
                </label>
                <label class="kw-allow" for="chk3">
                  <input type="checkbox" id="chk3" checked />
                  #협업
                </label>
              </div>
              <div class="keyword-list">
                <label class="kw-deny" for="chk4">
                  <input type="checkbox" id="chk4" checked />
                  #마인드셋
                </label>
                <label class="kw-deny" for="chk5">
                  <input type="checkbox" id="chk5" />
                  #웰니스
                </label>
              </div>
            </div>
            <p><em>취향저격 영상 추천</em>드려요.</p>
          </div>

          <div class="video-wrap">
            <!-- 비디오 카드 컨테이너 -->
            <div class="video-cards-container" id="videoCardsContainer"></div>
            <!-- 네비게이션 버튼 -->
            <button class="btn-prev" id="prevBtn">‹</button>
            <button class="btn-next" id="nextBtn">›</button>
            <!-- 페이지네이션 -->
            <div class="pagination" id="pagination">
              <span class="current">1</span> / 1
            </div>
          </div>

          <!-- keyword modal -->
          <div class="modal keyword" id="keywordModal">
            @@include("_modal/keyword.html")
          </div>
          <!-- // keyword modal -->
        </div>
      </div>

      <!-- // container -->
      @@include("guide.html")
    </div>

    <script type="module">
      import { VideoCardRenderer } from "./assets/js/main/VideoCardRenderer.js";
      import { VideoSlider } from "./assets/js/main/VideoSlider.js"; // 파일명 오타 수정

      const videos = [
        {
          id: 1,
          url: "KE_MeQZgnPM",
          category: "리더십",
          subcate: "행복과 건강",
          bookmark: true,
          title: "정선근 교수가 알려주는 목디스크 지식",
          picker: "홍길동",
          type: "main",
          keywords: ["소통", "건강"],
          gauge: 8,
        },
        {
          id: 2,
          url: "a2l1uZfsRi0",
          category: "인사이트",
          subcate: "행복과 건강",
          bookmark: false,
          title: "회계를 조금이라도 이해하면 인생이 달라지는 이유",
          picker: "",
          type: "main",
          keywords: ["소통", "코칭"],
          gauge: 80,
        },

        {
          id: 3,
          url: "IeF8r0ycgVg",
          category: "리더십",
          subcate: "피플스토리",
          bookmark: false,
          title: "꼰대가 되지 않고 건설적인 피드백을 하는 법",
          picker: "",
          type: "main",
          keywords: ["마인드셋", "자기개발"],
          gauge: 35,
        },

        {
          id: 4,
          url: "KMZXMI0QPoA",
          category: "리더십",
          subcate: "피플스토리",
          bookmark: false,
          title: "[경영 추천도서] 팀장이 처음이신가요? | 팀장 리더십 수업",
          picker: "",
          type: "main",
          keywords: ["마인드셋", "중간관리자"],
          gauge: 0,
        },
        {
          id: 5,
          url: "CRKwszz6l2M",
          category: "인사이트",
          subcate: "피플스토리",
          bookmark: false,
          title: "프로와 아마추어를 가르는 차이점!",
          picker: "",
          type: "main",
          keywords: ["소통", "건강"],
          gauge: 0,
        },

        {
          id: 6,
          url: "IZm1m_FKmc0",
          category: "인사이트",
          subcate: "피플스토리",
          bookmark: false,
          title: "창의적인 캠페인의 시작",
          picker: "",
          type: "main",
          keywords: ["팔로우십", "AI"],
          gauge: 0,
        },
        {
          id: 7,
          url: "KE_MeQZgnPM",
          category: "리더십",
          subcate: "행복과 건강",
          bookmark: false,
          title: "정선근 교수가 알려주는 목디스크 지식",
          picker: "홍길동",
          type: "main",
          keywords: ["소통", "건강"],
          gauge: 8,
        },
        {
          id: 8,
          url: "a2l1uZfsRi0",
          category: "인사이트",
          subcate: "행복과 건강",
          bookmark: false,
          title: "회계를 조금이라도 이해하면 인생이 달라지는 이유",
          picker: "",
          type: "main",
          keywords: ["소통", "코칭"],
          gauge: 80,
        },

        {
          id: 9,
          url: "IeF8r0ycgVg",
          category: "리더십",
          subcate: "피플스토리",
          bookmark: false,
          title: "꼰대가 되지 않고 건설적인 피드백을 하는 법",
          picker: "",
          type: "main",
          keywords: ["마인드셋", "자기개발"],
          gauge: 35,
        },
      ];

      // 렌더러 초기화
      const renderer = new VideoCardRenderer({
        animationDelay: 50,
      });

      // 슬라이더 초기화
      const slider = new VideoSlider({
        videos: videos, // videoArray가 아닌 videos
        videosPerPage: 6,
        onPageChange: (pageVideos) => {
          // 페이지가 변경될 때마다 해당 페이지의 비디오 렌더링
          renderer.renderCards(pageVideos);
        },
      });

      // 슬라이더 초기화 (첫 페이지 렌더링 포함)
      slider.init();
      renderer.renderCards(slider.getCurrentPageVideos());

      // 카드 클릭 이벤트 처리
      document
        .getElementById("videoCardsContainer")
        .addEventListener("click", (e) => {
          const card = e.target.closest(".card");
          if (card) {
            e.preventDefault();
            const videoId = card.getAttribute("data-video-id");
            console.log("비디오 클릭:", videoId);
            // 여기서 비디오 모달 열기 등 처리
          }
        });
    </script>
  </body>
</html>
