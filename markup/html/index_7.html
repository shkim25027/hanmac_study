<!doctype html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>반원형 게이지 바</title>
    <style>
      body {
        margin: 0;
        padding: 20px;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        min-height: 100vh;
        background-color: #f5f5f5;
        font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      }

      .gauge-container {
        background: white;
        padding: 40px;
        border-radius: 12px;
        box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
      }
    </style>
  </head>
  <body>
    <div class="gauge-container">
      <svg id="gauge" width="792" height="399" viewBox="0 0 792 399"></svg>
    </div>

    <script>
      const svg = document.getElementById("gauge");

      // SVG 설정값
      const width = 792;
      const height = 399;

      const centerX = width / 2; // 396
      const centerY = 200; // 적당히 위로 올림
      const radius = 365; // 질문의 arc 크기에 맞춘 반지름
      const strokeWidth = 31;
      const maxValue = 140;

      const defaultValue = 100; // 표시할 값

      function ptc(cx, cy, r, angle) {
        const rad = (angle * Math.PI) / 180;
        return {
          x: cx + r * Math.cos(rad),
          y: cy + r * Math.sin(rad),
        };
      }

      // sweep-flag = 1 (시계 방향)
      function arc(r, start, end) {
        const s = ptc(centerX, centerY, r, start);
        const e = ptc(centerX, centerY, r, end);

        const largeArc = end - start > 180 ? 1 : 0;

        return `M ${s.x} ${s.y} A ${r} ${r} 0 ${largeArc} 1 ${e.x} ${e.y}`;
      }

      function updateGauge(value) {
        svg.innerHTML = "";

        const percent = Math.min(value / maxValue, 1);
        const angle = -180 + percent * 180;

        // 배경 반원 (질문에서 제공한 스타일과 동일 stroke)
        const bg = document.createElementNS(
          "http://www.w3.org/2000/svg",
          "path"
        );
        bg.setAttribute("d", arc(radius, -180, 0));
        bg.setAttribute("stroke", "#E28A41");
        bg.setAttribute("stroke-width", strokeWidth);
        bg.setAttribute("stroke-linecap", "square");
        bg.setAttribute("stroke-linejoin", "round");
        bg.setAttribute("opacity", "0.2");
        bg.setAttribute("fill", "none");
        svg.appendChild(bg);

        // 채워진 반원
        const fg = document.createElementNS(
          "http://www.w3.org/2000/svg",
          "path"
        );
        fg.setAttribute("d", arc(radius, -180, angle));
        fg.setAttribute("stroke", "#E28A41");
        fg.setAttribute("stroke-width", strokeWidth);
        fg.setAttribute("stroke-linecap", "square");
        fg.setAttribute("stroke-linejoin", "round");
        fg.setAttribute("fill", "none");
        svg.appendChild(fg);

        // 끝점 원
        const p = ptc(centerX, centerY, radius, angle);
        const dot = document.createElementNS(
          "http://www.w3.org/2000/svg",
          "circle"
        );
        dot.setAttribute("cx", p.x);
        dot.setAttribute("cy", p.y);
        dot.setAttribute("r", 18);
        dot.setAttribute("fill", "#E28A41");
        svg.appendChild(dot);
      }

      updateGauge(defaultValue);
    </script>
  </body>
</html>
