<!doctype html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>ë°˜ì›í˜• ê²Œì´ì§€ ë°”</title>
    <style>
      body {
        margin: 0;
        padding: 20px;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        min-height: 100vh;
        background-color: #f5f5f5;
        font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      }

      .gauge-container {
        background: white;
        padding: 40px;
        border-radius: 12px;
        box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
      }
    </style>
  </head>
  <body>
    <div class="gauge-container">
      <svg id="gauge" width="792" height="460" viewBox="0 0 792 460"></svg>
    </div>

    <script>
      const svg = document.getElementById("gauge");

      const size = 792;
      const center = size / 2;
      const radius = 380;
      const strokeWidth = 31;
      const maxValue = 140;

      function ptc(cx, cy, r, angle) {
        const rad = (angle * Math.PI) / 180;
        return { x: cx + r * Math.cos(rad), y: cy + r * Math.sin(rad) };
      }

      function arc(r, start, end) {
        const s = ptc(center, center + 40, r, start);
        const e = ptc(center, center + 40, r, end);
        return `M ${s.x} ${s.y} A ${r} ${r} 0 0 1 ${e.x} ${e.y}`;
      }

      function updateGauge(value) {
        svg.innerHTML = "";

        const percent = Math.min(value / maxValue, 1);
        const angle = -180 + percent * 180;

        // ë°°ê²½ ë°˜ì›
        const bg = document.createElementNS(
          "http://www.w3.org/2000/svg",
          "path"
        );
        bg.setAttribute("d", arc(radius, -180, 0));
        bg.setAttribute("stroke", "#f2dfc7");
        bg.setAttribute("stroke-width", strokeWidth);
        bg.setAttribute("stroke-linecap", "square");
        bg.setAttribute("fill", "none");
        svg.appendChild(bg);

        // ì±„ì›Œì§„ ë°˜ì›
        const fg = document.createElementNS(
          "http://www.w3.org/2000/svg",
          "path"
        );
        fg.setAttribute("d", arc(radius, -180, angle));
        fg.setAttribute("stroke", "#e89555");
        fg.setAttribute("stroke-width", strokeWidth);
        fg.setAttribute("stroke-linecap", "round");
        fg.setAttribute("fill", "none");
        svg.appendChild(fg);

        // â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
        // ğŸ”¥ í…ìŠ¤íŠ¸ìš© ì•„í¬ 2ê°œ (ê²‰/ì•ˆìª½)
        // â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
        const defs = document.createElementNS(
          "http://www.w3.org/2000/svg",
          "defs"
        );

        // ì™¸ê³½ í…ìŠ¤íŠ¸: "ë‚˜ì˜ í•™ìŠµ : xxë¶„"
        const outerArc = document.createElementNS(
          "http://www.w3.org/2000/svg",
          "path"
        );
        outerArc.setAttribute("id", "outerArc");
        outerArc.setAttribute("d", arc(radius - 6, -180, 0));
        defs.appendChild(outerArc);

        // ë‚´ë¶€ í…ìŠ¤íŠ¸: "ì „ì²´ í‰ê·  í•™ìŠµ : xxë¶„"
        const innerArc = document.createElementNS(
          "http://www.w3.org/2000/svg",
          "path"
        );
        innerArc.setAttribute("id", "innerArc");
        innerArc.setAttribute("d", arc(radius - 35, -180, 0)); // ì•ˆìª½ìœ¼ë¡œ ì´ë™
        defs.appendChild(innerArc);

        svg.appendChild(defs);

        // â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
        // ğŸ”¥ "ë‚˜ì˜ í•™ìŠµ"
        // â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
        if (percent > 0.15) {
          const text = document.createElementNS(
            "http://www.w3.org/2000/svg",
            "text"
          );
          text.setAttribute("font-size", "15");
          text.setAttribute("font-weight", "600");
          text.setAttribute("fill", "#000");

          const tp = document.createElementNS(
            "http://www.w3.org/2000/svg",
            "textPath"
          );
          tp.setAttributeNS(
            "http://www.w3.org/1999/xlink",
            "xlink:href",
            "#outerArc"
          );
          tp.setAttribute("startOffset", `${Math.max(10, percent * 100 - 5)}%`);
          tp.setAttribute("text-anchor", "middle");
          tp.textContent = `ë‚˜ì˜ í•™ìŠµ : ${value}ë¶„`;

          text.appendChild(tp);
          svg.appendChild(text);
        }

        // ëì  ì›
        const p = ptc(center, center + 40, radius, angle);
        const dot = document.createElementNS(
          "http://www.w3.org/2000/svg",
          "circle"
        );
        dot.setAttribute("cx", p.x);
        dot.setAttribute("cy", p.y);
        dot.setAttribute("r", 7);
        dot.setAttribute("fill", "#804514");
        svg.appendChild(dot);

        // â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
        // ğŸ”¥ "ì „ì²´ í‰ê·  í•™ìŠµ" (ê²Œì´ì§€ ì•ˆìª½)
        // â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
        const maxText = document.createElementNS(
          "http://www.w3.org/2000/svg",
          "text"
        );
        maxText.setAttribute("font-size", "15");
        maxText.setAttribute("font-weight", "400");
        maxText.setAttribute("fill", "#000");

        const maxLabel = document.createElementNS(
          "http://www.w3.org/2000/svg",
          "textPath"
        );
        maxLabel.setAttributeNS(
          "http://www.w3.org/1999/xlink",
          "xlink:href",
          "#innerArc"
        );
        maxLabel.setAttribute("startOffset", "100%"); // ìœ„ì¹˜ ë¯¸ì„¸ì¡°ì • ê°€ëŠ¥
        maxLabel.setAttribute("text-anchor", "end");
        maxLabel.innerHTML = `ì „ì²´ í‰ê·  í•™ìŠµ : <tspan font-weight="700">${maxValue}</tspan>ë¶„`;

        maxText.appendChild(maxLabel);
        svg.appendChild(maxText);
      }

      updateGauge(100);
    </script>
  </body>
</html>
