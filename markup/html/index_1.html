<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>í™ê¸¸ë™ ì„ ì„ì—°êµ¬ì›ë‹˜</title>
    <style>
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      body {
        font-family:
          "Pretendard",
          -apple-system,
          sans-serif;
        background: linear-gradient(135deg, #f5e6d3 0%, #e8d5c4 100%);
        min-height: 100vh;
        padding: 20px;
        overflow-x: hidden;
      }

      .container {
        max-width: 1400px;
        margin: 0 auto;
      }

      .header {
        text-align: center;
        margin-bottom: 40px;
      }

      .main-title {
        font-size: 36px;
        color: #333;
        margin-bottom: 20px;
      }

      .circle-container {
        position: relative;
        width: 900px;
        height: 900px;
        margin: 0 auto;
      }

      .nav-button {
        position: absolute;
        top: 50%;
        transform: translateY(-50%);
        width: 60px;
        height: 60px;
        border: none;
        border-radius: 50%;
        background: white;
        color: #ff6b35;
        font-size: 24px;
        cursor: pointer;
        box-shadow: 0 4px 20px rgba(0, 0, 0, 0.15);
        transition: all 0.3s ease;
        z-index: 100;
        display: flex;
        align-items: center;
        justify-content: center;
      }

      .nav-button:hover {
        background: #ff6b35;
        color: white;
        transform: translateY(-50%) scale(1.1);
        box-shadow: 0 6px 25px rgba(255, 107, 53, 0.4);
      }

      .nav-button:active {
        transform: translateY(-50%) scale(0.95);
      }

      .nav-button.prev {
        left: -80px;
      }

      .nav-button.next {
        right: -80px;
      }

      .pagination {
        position: absolute;
        bottom: -60px;
        left: 50%;
        transform: translateX(-50%);
        font-size: 18px;
        color: #666;
        font-weight: 600;
      }

      .pagination .current {
        color: #ff6b35;
        font-size: 22px;
      }

      .center-circle {
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        width: 400px;
        height: 400px;
        background: linear-gradient(135deg, #ff9a56 0%, #ff6b35 100%);
        border-radius: 50%;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        color: white;
        box-shadow: 0 10px 40px rgba(255, 107, 53, 0.3);
        z-index: 10;
      }

      .center-title {
        font-size: 32px;
        font-weight: 700;
        margin-bottom: 20px;
      }

      .center-subtitle {
        font-size: 18px;
        opacity: 0.9;
        margin-bottom: 20px;
      }

      .center-tags {
        display: flex;
        gap: 10px;
        flex-wrap: wrap;
        justify-content: center;
        margin-bottom: 10px;
      }

      .tag {
        padding: 6px 16px;
        background: rgba(255, 255, 255, 0.3);
        border-radius: 15px;
        font-size: 14px;
        font-weight: 600;
        cursor: pointer;
        transition: all 0.3s ease;
        border: 2px solid transparent;
      }

      .tag:hover {
        background: rgba(255, 255, 255, 0.5);
        transform: scale(1.05);
      }

      .tag.active {
        background: white;
        color: #ff6b35;
        border-color: white;
      }

      .recommendation-text {
        font-size: 20px;
        margin-top: 20px;
        font-weight: 600;
      }

      .video-cards-container {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        transition: opacity 0.4s ease;
      }

      .video-cards-container.fade-out {
        opacity: 0;
      }

      .video-card {
        position: absolute;
        width: 280px;
        background: white;
        border-radius: 20px;
        padding: 20px;
        box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
        cursor: pointer;
        transition: all 0.3s ease;
        opacity: 0;
      }

      .video-card.show {
        animation: slideInCard 0.6s ease forwards;
      }

      @keyframes slideInCard {
        from {
          opacity: 0;
          transform: translateY(40px) scale(0.8);
        }
        to {
          opacity: 1;
          transform: translateY(0) scale(1);
        }
      }

      .video-card:hover {
        transform: translateY(-8px) scale(1.05);
        box-shadow: 0 12px 35px rgba(0, 0, 0, 0.2);
        z-index: 20;
      }

      .video-card .thumbnail {
        width: 80px;
        height: 80px;
        border-radius: 50%;
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        margin-bottom: 15px;
        display: flex;
        align-items: center;
        justify-content: center;
        color: white;
        font-weight: 700;
        font-size: 14px;
      }

      .video-card .category {
        display: inline-block;
        padding: 4px 12px;
        background: #f0f0f0;
        border-radius: 10px;
        font-size: 12px;
        color: #666;
        margin-bottom: 10px;
      }

      .video-card .title {
        font-size: 16px;
        font-weight: 700;
        color: #333;
        margin-bottom: 8px;
        line-height: 1.4;
        display: -webkit-box;
        -webkit-line-clamp: 2;
        -webkit-box-orient: vertical;
        overflow: hidden;
      }

      .video-card .author {
        font-size: 13px;
        color: #999;
      }

      .keywords-display {
        display: flex;
        gap: 5px;
        flex-wrap: wrap;
        margin-top: 8px;
      }

      .keyword-badge {
        display: inline-block;
        padding: 3px 8px;
        background: #e8f4f8;
        color: #2196f3;
        border-radius: 10px;
        font-size: 11px;
        font-weight: 600;
      }

      /* ëª¨ë‹¬ ìŠ¤íƒ€ì¼ */
      .modal-overlay {
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: rgba(0, 0, 0, 0.5);
        display: none;
        align-items: center;
        justify-content: center;
        z-index: 1000;
      }

      .modal-overlay.active {
        display: flex;
      }

      .modal-content {
        background: white;
        border-radius: 20px;
        padding: 40px;
        max-width: 600px;
        width: 90%;
        max-height: 80vh;
        overflow-y: auto;
        position: relative;
        box-shadow: 0 10px 40px rgba(0, 0, 0, 0.2);
      }

      .modal-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 30px;
      }

      .modal-title {
        font-size: 24px;
        font-weight: 700;
        color: #333;
      }

      .modal-title .checkmark {
        color: #ff6b35;
        margin-left: 8px;
      }

      .modal-close {
        width: 32px;
        height: 32px;
        border: none;
        background: #f0f0f0;
        border-radius: 50%;
        font-size: 20px;
        cursor: pointer;
        display: flex;
        align-items: center;
        justify-content: center;
        transition: all 0.3s ease;
      }

      .modal-close:hover {
        background: #e0e0e0;
        transform: rotate(90deg);
      }

      .modal-keywords {
        display: flex;
        flex-wrap: wrap;
        gap: 12px;
      }

      .modal-keyword-tag {
        padding: 12px 20px;
        border-radius: 25px;
        background: #f5f5f5;
        color: #666;
        font-size: 15px;
        font-weight: 600;
        cursor: pointer;
        transition: all 0.3s ease;
        border: 2px solid transparent;
        position: relative;
      }

      .modal-keyword-tag:hover {
        background: #e8e8e8;
        transform: translateY(-2px);
      }

      .modal-keyword-tag.selected {
        background: #ff6b35;
        color: white;
        border-color: #ff6b35;
      }

      .modal-keyword-tag .plus-icon,
      .modal-keyword-tag .minus-icon {
        margin-left: 8px;
        font-size: 18px;
      }

      .modal-keyword-tag.selected .plus-icon {
        display: none;
      }

      .modal-keyword-tag:not(.selected) .minus-icon {
        display: none;
      }

      .keyword-settings-btn {
        background: transparent;
        border: none;
        color: white;
        cursor: pointer;
        font-size: 16px;
        padding: 8px;
        margin-left: 10px;
        transition: all 0.3s ease;
        display: inline-flex;
        align-items: center;
      }

      .keyword-settings-btn:hover {
        transform: scale(1.1);
      }

      .keyword-settings-btn::before {
        content: "âš™ï¸";
        font-size: 20px;
      }

      .loading-overlay {
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: rgba(245, 230, 211, 0.8);
        display: none;
        align-items: center;
        justify-content: center;
        z-index: 1000;
      }

      .loading-overlay.active {
        display: flex;
      }

      .spinner {
        width: 60px;
        height: 60px;
        border: 5px solid rgba(255, 107, 53, 0.2);
        border-top: 5px solid #ff6b35;
        border-radius: 50%;
        animation: spin 1s linear infinite;
      }

      @keyframes spin {
        0% {
          transform: rotate(0deg);
        }
        100% {
          transform: rotate(360deg);
        }
      }
    </style>
  </head>
  <body>
    <div class="loading-overlay" id="loadingOverlay">
      <div class="spinner"></div>
    </div>

    <div class="container">
      <div class="header">
        <h1 class="main-title">í™ê¸¸ë™ ì„ ì„ì—°êµ¬ì›ë‹˜</h1>
      </div>

      <div class="circle-container">
        <!-- ë„¤ë¹„ê²Œì´ì…˜ ë²„íŠ¼ -->
        <button class="nav-button prev" id="prevBtn">â€¹</button>
        <button class="nav-button next" id="nextBtn">â€º</button>

        <!-- ì¤‘ì•™ ì›ì€ ê³ ì • -->
        <div class="center-circle">
          <div class="center-title" id="centerKeyword">
            ì„ íƒëœ í‚¤ì›Œë“œ
            <button
              class="keyword-settings-btn"
              id="keywordSettingsBtn"
              aria-label="ë‚˜ì˜ í‚¤ì›Œë“œ ì„¤ì •"
            ></button>
          </div>
          <div class="center-subtitle">ë‚˜ì˜ í‚¤ì›Œë“œ ğŸ’¡</div>
          <div class="center-tags">
            <span class="tag active" data-keyword="ê´€ì°°">#ê´€ì°°</span>
            <span class="tag" data-keyword="ì†Œí†µ">#ì†Œí†µ</span>
            <span class="tag" data-keyword="íŒ€ì›Œí¬">#íŒ€ì›Œí¬</span>
            <span class="tag" data-keyword="ë§ˆì¸ë“œì…‹">#ë§ˆì¸ë“œì…‹</span>
          </div>
          <div class="recommendation-text">ì·¨í–¥ì €ê²© ì˜ìƒ ì¶”ì²œë“œë ¤ìš”.</div>
        </div>

        <!-- ë¹„ë””ì˜¤ ì¹´ë“œ ì»¨í…Œì´ë„ˆ -->
        <div class="video-cards-container" id="videoCardsContainer"></div>

        <!-- í˜ì´ì§€ë„¤ì´ì…˜ -->
        <div class="pagination" id="pagination">
          <span class="current">1</span> / <span id="totalPages">4</span>
        </div>
      </div>
    </div>

    <script>
      // ì „ì²´ ì˜ìƒ ë°ì´í„°
      const allVideos = [
        {
          id: 1,
          category: "ë¦¬ë”ì‹­",
          title: "ì •ì„ ê·¼ êµìˆ˜ê°€ ì•Œë ¤ì£¼ëŠ” ëª©ë””ìŠ¤í¬ ì§€ì‹",
          keywords: ["ê´€ì°°", "ì†Œí†µ"],
        },
        {
          id: 2,
          category: "ì¸ì‚¬ì´íŠ¸",
          title: "ê¸°êº¼ì´ 'ì´ ë§'ì„ ë‚´ ë±‰ì„ ì¤„ ì•Œì•„ì•¼ ì¸ì •ë°›ëŠ”ë‹¤",
          keywords: ["ë§ˆì¸ë“œì…‹", "ì†Œí†µ"],
        },
        {
          id: 3,
          category: "ì¸ì‚¬ì´íŠ¸",
          title: "íšŒê³„ë¥¼ ì¡°ê¸ˆì´ë¼ë„ ì´í•´í•˜ë©´ ì¸ìƒì´ ë‹¬ë¼ì§‘ë‹ˆë‹¤",
          keywords: ["ê´€ì°°", "íŒ€ì›Œí¬"],
        },
        {
          id: 4,
          category: "ë¦¬ë”ì‹­",
          title: "ì„±ì¥í•˜ëŠ” ì‚¬ëŒì€ 'OO ë§ˆì¸ë“œ'ì…‹",
          keywords: ["ë§ˆì¸ë“œì…‹", "ê´€ì°°"],
        },
        {
          id: 5,
          category: "ì¸ì‚¬ì´íŠ¸",
          title: "ì •ì„ ê·¼ êµìˆ˜ê°€ ì•Œë ¤ì£¼ëŠ” ëª©ë””ìŠ¤í¬ ì§€ì‹",
          keywords: ["ì†Œí†µ", "íŒ€ì›Œí¬"],
        },
        {
          id: 6,
          category: "ë¹„ì¦ˆíŠ¸ë Œë“œ",
          title: "3/2 - ì´ëŒ€í˜¸ì˜ ë³„ì±…ë¶€ë¡ [1ì¡° ì—¬í–‰ ê¿€íŒ]",
          keywords: ["ê´€ì°°", "ë§ˆì¸ë“œì…‹"],
        },
        {
          id: 7,
          category: "íŒ€ì›Œí¬",
          title: "íš¨ê³¼ì ì¸ í˜‘ì—…ì„ ìœ„í•œ 5ê°€ì§€ ì›ì¹™",
          keywords: ["íŒ€ì›Œí¬", "ì†Œí†µ"],
        },
        {
          id: 8,
          category: "ì»¤ë®¤ë‹ˆì¼€ì´ì…˜",
          title: "íŒ€ ìƒì‚°ì„±ì„ ë†’ì´ëŠ” í˜‘ì—… ë„êµ¬",
          keywords: ["íŒ€ì›Œí¬", "ê´€ì°°"],
        },
        {
          id: 9,
          category: "ë¦¬ë”ì‹­",
          title: "ì›ê²© ê·¼ë¬´ ì‹œëŒ€ì˜ í˜‘ì—… ì „ëµ",
          keywords: ["ì†Œí†µ", "íŒ€ì›Œí¬"],
        },
        {
          id: 10,
          category: "ì¸ì‚¬ì´íŠ¸",
          title: "ê°ˆë“±ì„ ê¸°íšŒë¡œ ë§Œë“œëŠ” í˜‘ì—… ê¸°ìˆ ",
          keywords: ["ì†Œí†µ", "ë§ˆì¸ë“œì…‹"],
        },
        {
          id: 11,
          category: "íŒ€ì›Œí¬",
          title: "ì• ìì¼ ë°©ì‹ìœ¼ë¡œ ì¼í•˜ëŠ” ë²•",
          keywords: ["íŒ€ì›Œí¬", "ê´€ì°°"],
        },
        {
          id: 12,
          category: "í˜‘ì—…",
          title: "í¬ë¡œìŠ¤í‘ì…”ë„ íŒ€ ìš´ì˜ ë…¸í•˜ìš°",
          keywords: ["íŒ€ì›Œí¬", "ì†Œí†µ"],
        },
        {
          id: 13,
          category: "ë¦¬ë”ì‹­",
          title: "2025ë…„ ë¦¬ë”ê°€ ê°–ì¶°ì•¼ í•  ì—­ëŸ‰",
          keywords: ["ê´€ì°°", "ë§ˆì¸ë“œì…‹"],
        },
        {
          id: 14,
          category: "ë§¤ë‹ˆì§€ë¨¼íŠ¸",
          title: "ë°€ë ˆë‹ˆì–¼ ì„¸ëŒ€ë¥¼ ì´ë„ëŠ” ë²•",
          keywords: ["ì†Œí†µ", "ê´€ì°°"],
        },
        {
          id: 15,
          category: "ë¦¬ë”ì‹­",
          title: "í”¼ë“œë°±ì˜ ê¸°ìˆ : ì„±ì¥í•˜ëŠ” íŒ€ ë§Œë“¤ê¸°",
          keywords: ["ì†Œí†µ", "íŒ€ì›Œí¬"],
        },
        {
          id: 16,
          category: "ì¸ì‚¬ì´íŠ¸",
          title: "ìœ„ê¸° ìƒí™©ì—ì„œ ë¹›ë‚˜ëŠ” ë¦¬ë”ì‹­",
          keywords: ["ë§ˆì¸ë“œì…‹", "ê´€ì°°"],
        },
        {
          id: 17,
          category: "ë¦¬ë”ì‹­",
          title: "ê¶Œí•œ ìœ„ì„ê³¼ ì±…ì„ì˜ ê· í˜•",
          keywords: ["íŒ€ì›Œí¬", "ë§ˆì¸ë“œì…‹"],
        },
        {
          id: 18,
          category: "ë§¤ë‹ˆì§€ë¨¼íŠ¸",
          title: "ë°ì´í„°ë¡œ ì˜ì‚¬ê²°ì •í•˜ëŠ” ë¦¬ë”",
          keywords: ["ê´€ì°°", "íŒ€ì›Œí¬"],
        },
        {
          id: 19,
          category: "í˜ì‹ ",
          title: "AI ì‹œëŒ€, ì¡°ì§ í˜ì‹  ì „ëµ",
          keywords: ["ë§ˆì¸ë“œì…‹", "ê´€ì°°"],
        },
        {
          id: 20,
          category: "íŠ¸ë Œë“œ",
          title: "ìŠ¤íƒ€íŠ¸ì—…ì—ì„œ ë°°ìš°ëŠ” í˜ì‹  ë§ˆì¸ë“œ",
          keywords: ["ë§ˆì¸ë“œì…‹", "ì†Œí†µ"],
        },
        {
          id: 21,
          category: "í˜ì‹ ",
          title: "ì‹¤íŒ¨ë¥¼ ë‘ë ¤ì›Œí•˜ì§€ ì•ŠëŠ” ì¡°ì§ë¬¸í™”",
          keywords: ["ë§ˆì¸ë“œì…‹", "íŒ€ì›Œí¬"],
        },
        {
          id: 22,
          category: "ì¸ì‚¬ì´íŠ¸",
          title: "ê³ ê° ì¤‘ì‹¬ í˜ì‹ ì˜ ëª¨ë“  ê²ƒ",
          keywords: ["ê´€ì°°", "ì†Œí†µ"],
        },
        {
          id: 23,
          category: "í˜ì‹ ",
          title: "ì§€ì†ê°€ëŠ¥í•œ í˜ì‹ ì„ ìœ„í•œ í”„ë ˆì„ì›Œí¬",
          keywords: ["ê´€ì°°", "íŒ€ì›Œí¬"],
        },
        {
          id: 24,
          category: "íŠ¸ë Œë“œ",
          title: "ë””ì§€í„¸ í˜ì‹  ì„±ê³µ ì‚¬ë¡€ TOP 10",
          keywords: ["ë§ˆì¸ë“œì…‹", "ì†Œí†µ"],
        },
      ];

      // í˜„ì¬ ì„ íƒëœ í‚¤ì›Œë“œë“¤ (ë°°ì—´)
      let selectedKeywords = ["ê´€ì°°"];

      // í˜ì´ì§€ë‹¹ ë³´ì—¬ì¤„ ì˜ìƒ ê°œìˆ˜
      const VIDEOS_PER_PAGE = 6;

      // í˜„ì¬ í˜ì´ì§€
      let currentPage = 0;

      // í‚¤ì›Œë“œì— ë§ëŠ” ì˜ìƒ í•„í„°ë§ ë° ì •ë ¬ (ë§¤ì¹­ëœ ì˜ìƒ ìš°ì„ , ë‚˜ë¨¸ì§€ëŠ” ëœë¤)
      function getFilteredAndSortedVideos() {
        if (selectedKeywords.length === 0) {
          return shuffleArray(allVideos); // ì„ íƒëœ í‚¤ì›Œë“œê°€ ì—†ìœ¼ë©´ ì „ì²´ ëœë¤
        }

        // ë§¤ì¹­ë˜ëŠ” ì˜ìƒê³¼ ë§¤ì¹­ë˜ì§€ ì•ŠëŠ” ì˜ìƒ ë¶„ë¦¬
        const matchedVideos = [];
        const unmatchedVideos = [];

        allVideos.forEach((video) => {
          const hasMatch = video.keywords.some((keyword) =>
            selectedKeywords.includes(keyword)
          );
          if (hasMatch) {
            matchedVideos.push(video);
          } else {
            unmatchedVideos.push(video);
          }
        });

        // ë§¤ì¹­ëœ ì˜ìƒì€ ëœë¤ ì„ê¸°
        const shuffledMatched = shuffleArray(matchedVideos);

        // ë§¤ì¹­ë˜ì§€ ì•Šì€ ì˜ìƒë„ ëœë¤ ì„ê¸°
        const shuffledUnmatched = shuffleArray(unmatchedVideos);

        // ë§¤ì¹­ëœ ì˜ìƒì„ ë¨¼ì € ë³´ì—¬ì£¼ê³ , ê·¸ ë‹¤ìŒ ë‚˜ë¨¸ì§€ ì˜ìƒ
        return [...shuffledMatched, ...shuffledUnmatched];
      }

      // ì „ì²´ í˜ì´ì§€ ìˆ˜ ê³„ì‚°
      function getTotalPages() {
        const sortedVideos = getFilteredAndSortedVideos();
        return Math.ceil(sortedVideos.length / VIDEOS_PER_PAGE);
      }

      // ê³ ì • ìœ„ì¹˜ ë°°ì¹˜ (ì™¼ìª½ 3ê°œ, ì˜¤ë¥¸ìª½ 3ê°œ)
      function getFixedPosition(index) {
        const positions = [
          // ì™¼ìª½ 3ê°œ
          { x: 50, y: 100 },
          { x: 30, y: 350 },
          { x: 50, y: 600 },
          // ì˜¤ë¥¸ìª½ 3ê°œ
          { x: 570, y: 100 },
          { x: 590, y: 350 },
          { x: 570, y: 600 },
        ];

        return positions[index] || positions[0];
      }

      // ë¹„ë””ì˜¤ ì¹´ë“œ ìƒì„±
      function createVideoCard(video, index) {
        const card = document.createElement("div");
        card.className = "video-card";

        const pos = getFixedPosition(index);
        card.style.left = pos.x + "px";
        card.style.top = pos.y + "px";

        const colors = [
          "#667eea",
          "#f093fb",
          "#4facfe",
          "#43e97b",
          "#fa709a",
          "#30cfd0",
        ];
        const color = colors[index % colors.length];

        // keywordsë¥¼ íƒœê·¸ í˜•ì‹ìœ¼ë¡œ í‘œì‹œ
        const keywordTags = video.keywords
          .map((kw) => `<span class="keyword-badge">#${kw}</span>`)
          .join(" ");

        card.innerHTML = `
                <div class="thumbnail" style="background: linear-gradient(135deg, ${color} 0%, ${color}dd 100%)">
                    ì˜ìƒ ${video.id}
                </div>
                <div class="category">${video.category}</div>
                <div class="title">${video.title}</div>
                <div class="keywords-display">${keywordTags}</div>
            `;

        return card;
      }

      // í˜„ì¬ í˜ì´ì§€ì˜ ì˜ìƒ ëª©ë¡ ê°€ì ¸ì˜¤ê¸°
      function getCurrentPageVideos() {
        const sortedVideos = getFilteredAndSortedVideos();
        const startIndex = currentPage * VIDEOS_PER_PAGE;
        const endIndex = startIndex + VIDEOS_PER_PAGE;
        return sortedVideos.slice(startIndex, endIndex);
      }

      // ì˜ìƒ ëª©ë¡ ë Œë”ë§
      function renderVideos() {
        const container = document.getElementById("videoCardsContainer");
        const videos = getCurrentPageVideos();

        // ê¸°ì¡´ ì¹´ë“œ ì œê±°
        container.innerHTML = "";

        // ìƒˆ ì¹´ë“œ ìƒì„± ë° ìˆœì°¨ì  ì• ë‹ˆë©”ì´ì…˜
        videos.forEach((video, index) => {
          const card = createVideoCard(video, index);
          container.appendChild(card);

          // ìˆœì°¨ì ìœ¼ë¡œ ë‚˜íƒ€ë‚˜ê²Œ ë”œë ˆì´ ì¶”ê°€
          setTimeout(() => {
            card.classList.add("show");
          }, index * 100);
        });

        // í˜ì´ì§€ë„¤ì´ì…˜ ì—…ë°ì´íŠ¸
        updatePagination();
      }

      // í˜ì´ì§€ë„¤ì´ì…˜ ì—…ë°ì´íŠ¸
      function updatePagination() {
        const pagination = document.getElementById("pagination");
        const totalPages = getTotalPages();

        pagination.innerHTML = `<span class="current">${currentPage + 1}</span> / ${totalPages}`;
      }

      // ë°°ì—´ ì„ê¸° (Fisher-Yates ì•Œê³ ë¦¬ì¦˜)
      function shuffleArray(array) {
        const shuffled = [...array];
        for (let i = shuffled.length - 1; i > 0; i--) {
          const j = Math.floor(Math.random() * (i + 1));
          [shuffled[i], shuffled[j]] = [shuffled[j], shuffled[i]];
        }
        return shuffled;
      }

      // í˜ì´ì§€ ë³€ê²½ (í˜ì´ë“œ íš¨ê³¼)
      async function changePage() {
        const cardsContainer = document.getElementById("videoCardsContainer");

        // 1. í˜ì´ë“œ ì•„ì›ƒ
        cardsContainer.classList.add("fade-out");

        // 2. í˜ì´ë“œ ì•„ì›ƒ ì™„ë£Œ ëŒ€ê¸°
        await new Promise((resolve) => setTimeout(resolve, 400));

        // 3. ìƒˆë¡œìš´ ì˜ìƒ ëª©ë¡ ë Œë”ë§
        renderVideos();

        // 4. í˜ì´ë“œ ì¸
        cardsContainer.classList.remove("fade-out");
      }

      // ë„¤ë¹„ê²Œì´ì…˜ ë²„íŠ¼ ì´ë²¤íŠ¸
      document.getElementById("prevBtn").addEventListener("click", async () => {
        if (currentPage > 0) {
          currentPage--;
          await changePage();
        }
      });

      document.getElementById("nextBtn").addEventListener("click", async () => {
        const totalPages = getTotalPages();
        if (currentPage < totalPages - 1) {
          currentPage++;
          await changePage();
        }
      });

      // ì¤‘ì•™ íƒ€ì´í‹€ ì—…ë°ì´íŠ¸
      function updateCenterTitle() {
        const centerKeyword = document.getElementById("centerKeyword");
        if (selectedKeywords.length === 0) {
          centerKeyword.textContent = "ì „ì²´ ì˜ìƒ";
        } else if (selectedKeywords.length === 1) {
          centerKeyword.textContent = selectedKeywords[0];
        } else {
          centerKeyword.textContent = selectedKeywords.join(" + ");
        }

        // ë§¤ì¹­ëœ ì˜ìƒ ìˆ˜ í‘œì‹œ
        const sortedVideos = getFilteredAndSortedVideos();
        const matchedCount = allVideos.filter((video) =>
          video.keywords.some((keyword) => selectedKeywords.includes(keyword))
        ).length;

        if (selectedKeywords.length > 0 && matchedCount > 0) {
          console.log(
            `ë§¤ì¹­ëœ ì˜ìƒ: ${matchedCount}ê°œ, ì „ì²´: ${sortedVideos.length}ê°œ`
          );
        }
      }

      // í‚¤ì›Œë“œ íƒœê·¸ í´ë¦­ ì´ë²¤íŠ¸
      document.querySelectorAll(".tag").forEach((tag) => {
        tag.addEventListener("click", async function () {
          const keyword = this.dataset.keyword;

          // í† ê¸€ ë°©ì‹ìœ¼ë¡œ ë™ì‘
          if (this.classList.contains("active")) {
            // ì´ë¯¸ ì„ íƒëœ í‚¤ì›Œë“œë©´ ì œê±°
            this.classList.remove("active");
            selectedKeywords = selectedKeywords.filter((k) => k !== keyword);
          } else {
            // ì„ íƒë˜ì§€ ì•Šì€ í‚¤ì›Œë“œë©´ ì¶”ê°€
            this.classList.add("active");
            selectedKeywords.push(keyword);
          }

          // ì¤‘ì•™ íƒ€ì´í‹€ ì—…ë°ì´íŠ¸
          updateCenterTitle();

          // í˜ì´ì§€ë¥¼ ì²« í˜ì´ì§€ë¡œ ë¦¬ì…‹
          currentPage = 0;

          // í˜ì´ë“œ íš¨ê³¼ì™€ í•¨ê»˜ ì˜ìƒ ë³€ê²½
          await changePage();
        });
      });

      // ì´ˆê¸° ë Œë”ë§
      updateCenterTitle();
      renderVideos();

      // ëª¨ë‹¬ ê´€ë ¨ ê¸°ëŠ¥
      const keywordModal = document.getElementById("keywordModal");
      const keywordSettingsBtn = document.getElementById("keywordSettingsBtn");
      const modalClose = document.getElementById("modalClose");

      // ëª¨ë‹¬ ì—´ê¸°
      keywordSettingsBtn.addEventListener("click", () => {
        keywordModal.classList.add("active");
      });

      // ëª¨ë‹¬ ë‹«ê¸°
      modalClose.addEventListener("click", () => {
        keywordModal.classList.remove("active");
      });

      // ëª¨ë‹¬ ì™¸ë¶€ í´ë¦­ ì‹œ ë‹«ê¸°
      keywordModal.addEventListener("click", (e) => {
        if (e.target === keywordModal) {
          keywordModal.classList.remove("active");
        }
      });

      // ëª¨ë‹¬ ë‚´ í‚¤ì›Œë“œ íƒœê·¸ í´ë¦­
      document.querySelectorAll(".modal-keyword-tag").forEach((tag) => {
        tag.addEventListener("click", function () {
          this.classList.toggle("selected");

          const keyword = this.dataset.keyword;

          // ì¤‘ì•™ ì›ì˜ íƒœê·¸ë“¤ê³¼ ë™ê¸°í™”
          const centerTag = document.querySelector(
            `.tag[data-keyword="${keyword}"]`
          );
          if (centerTag) {
            if (this.classList.contains("selected")) {
              centerTag.classList.add("active");
              if (!selectedKeywords.includes(keyword)) {
                selectedKeywords.push(keyword);
              }
            } else {
              centerTag.classList.remove("active");
              selectedKeywords = selectedKeywords.filter((k) => k !== keyword);
            }
          } else {
            // ì¤‘ì•™ ì›ì— ì—†ëŠ” ìƒˆë¡œìš´ í‚¤ì›Œë“œ
            if (this.classList.contains("selected")) {
              if (!selectedKeywords.includes(keyword)) {
                selectedKeywords.push(keyword);
              }
            } else {
              selectedKeywords = selectedKeywords.filter((k) => k !== keyword);
            }
          }

          // ì¤‘ì•™ íƒ€ì´í‹€ ì—…ë°ì´íŠ¸
          updateCenterTitle();
        });
      });
    </script>
  </body>
</html>
