// @mixin

// --------------------------------------------
// Layout Mixins
// --------------------------------------------
/// Flexbox
@mixin flex($direction: row, $align: center, $justify: center) {
  display: flex;
  align-items: $align;
  justify-content: $justify;
  flex-direction: $direction;
}

/// Grid layout
@mixin grid($columns: 1, $gap: 1rem) {
  display: grid;
  grid-template-columns: repeat($columns, 1fr);
  gap: $gap;
}

// @include clearfix;
@mixin clearfix {
  &:after {
    content: "";
    display: block;
    clear: both;
  }
}

// --------------------------------------------
// Positioning Mixins
// --------------------------------------------

/// Position shorthand
/// @param {String} $position - Position type
/// @param {Map} $args - Position values (top, right, bottom, left)
///
@mixin position($position, $args) {
  position: $position;

  @each $dir in top, right, bottom, left {
    $i: index($args, $dir);
    @if $i and $i + 1 <= length($args) and type-of(nth($args, $i + 1)) == number
    {
      #{$dir}: nth($args, $i + 1);
    }
  }
}

/// @include absolute(top 0 right 0 bottom left 0);
@mixin absolute($args) {
  @include position(absolute, $args);
}

/// @include fixed(top 0 right 0 bottom left 0);
@mixin fixed($args) {
  @include position(fixed, $args);
}

/// @include relative(top 0 right 0 bottom left 0);
@mixin relative($args) {
  @include position(relative, $args);
}

/// Center element absolutely
@mixin center-absolute {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
}

// --------------------------------------------
// Visibility Mixins
// --------------------------------------------

// @include blind;
@mixin blind {
  position: absolute;
  clip: rect(0 0 0 0);
  clip-path: inset(50%);
  width: 1px;
  height: 1px;
  margin: -1px;
  overflow: hidden;
  border: 0;
  padding: 0;
  white-space: nowrap;
}

// @include textBlind;
@mixin textBlind {
  text-indent: -9999px;
  color: transparent;
  font-size: 1px;
  overflow: hidden;
}

// --------------------------------------------
// Typography Mixins
// --------------------------------------------

// text-ellipsis
@mixin ellipsis($line: 1) {
  @if ($line == 1) {
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
  } @else {
    display: -webkit-box;
    overflow: hidden;
    text-overflow: ellipsis;
    -webkit-box-orient: vertical;
    -webkit-line-clamp: $line;
  }
}

/// Fluid typography
/// @param {Number} $min-size - Minimum font size
/// @param {Number} $max-size - Maximum font size
/// @param {Number} $min-vw [320px] - Minimum viewport width
/// @param {Number} $max-vw [1200px] - Maximum viewport width
@mixin fluid-type($min-size, $max-size, $min-vw: 320px, $max-vw: 1200px) {
  font-size: $min-size;

  @media (min-width: $min-vw) {
    font-size: calc(
      #{$min-size} + #{strip-unit($max-size - $min-size)} *
        (100vw - #{$min-vw}) / #{strip-unit($max-vw - $min-vw)}
    );
  }

  @media (min-width: $max-vw) {
    font-size: $max-size;
  }
}

// --------------------------------------------
// Form Mixins
// --------------------------------------------

// placeholders
@mixin input-placeholder {
  &.placeholder {
    @content;
  }
  &:-moz-placeholder {
    @content;
  }
  &::-moz-placeholder {
    @content;
  }
  &:-ms-input-placeholder {
    @content;
  }
  &::-webkit-input-placeholder {
    @content;
  }
}

// --------------------------------------------
// Pseudo Element Mixins
// --------------------------------------------

// pseudo (::before, ::after)
@mixin pseudo($display: block, $pos: absolute, $content: "") {
  content: $content;
  display: $display;
  position: $pos;
}

// --------------------------------------------
// Background Mixins
// --------------------------------------------
/// Responsive background image
@mixin bgImg($url, $size: cover, $position: center) {
  background-image: url($url);
  background-size: $size;
  background-position: $position;
  background-repeat: no-repeat;
}

@mixin svgIconMask($path, $color, $width: auto) {
  background-color: $color;
  mask-image: url($path);
  mask-size: contain;
  mask-position: center;
  mask-repeat: no-repeat;
  -webkit-mask-image: url($path);
  -webkit-mask-size: contain;
  -webkit-mask-position: center;
  -webkit-mask-repeat: no-repeat;

  @if $width != auto {
    width: $width;
    aspect-ratio: 1 / 1;
  }
}

@mixin svgIcon($path, $width: auto) {
  @include bgImg($path, contain, center);
  @if $width != auto {
    width: $width;
    aspect-ratio: 1 / 1;
  }
}

$icon-registry: (
  "bookmark": "../images/ico/ico_bookmark_off.svg",
  // 주황색 버전
  "bookmark-on": "../images/ico/ico_bookmark_on.svg", // 흰색 버전
);
@function icon($name) {
  @return map-get($icon-registry, $name);
}

@mixin useIcon($name, $size: 24px) {
  @include svgIcon(icon($name), $size);
}

@mixin useIconMask($name, $color: currentColor, $size: 24px) {
  @include svgIconMask(icon($name), $color, $size);
}

// --------------------------------------------
// Responsive Mixins
// --------------------------------------------
// media query
$breakpoints: (
  "phone": 360px,
  "phone-wide": 576px,
  "tablet-small": 768px,
  "tablet": 992px,
  "tablet-wide": 1024px,
  "desktop": 1200px,
  "desktop-wide": 1400px,
  "desktop-hd": 1920px,
  "desktop-2k": 2560px,
  "desktop-4k": 3840px,
);

@mixin mq($width, $type: min) {
  @if map_has_key($breakpoints, $width) {
    $width: map_get($breakpoints, $width);
    @if $type == max {
      $width: $width - 1px;
    }
    @media only screen and (#{$type}-width: $width) {
      @content;
    }
  }
}

/// Responsive ratio container
/// @param {Number} $width - Container width
/// @param {Number} $height - Container height
@mixin aspect-ratio($width, $height) {
  position: relative;

  &::before {
    content: "";
    display: block;
    padding-top: percentage($height / $width);
  }

  > * {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
  }
}

// --------------------------------------------
// Effect Mixins
// --------------------------------------------

// box-shadow
@mixin shadow(
  $x: 0,
  $y: 2px,
  $blur: 4px,
  $spread: 0,
  $color: rgba(0, 0, 0, 0.1)
) {
  box-shadow: $x $y $blur $spread $color;
}

// text-shadow
@mixin text-shadow($x: 0, $y: 1px, $blur: 0, $color: rgba(0, 0, 0, 0.25)) {
  text-shadow: $x $y $blur $color;
}

/// Transition shorthand
@mixin transition($property: all, $duration: 0.3s, $timing: ease) {
  transition: $property $duration $timing;
}

// inline-block 에 vertical-align : top을 일일히 붙히지 않아도 되는 mixin
@mixin inline-block-box($vertical-align: top) {
  display: inline-block;
  vertical-align: $vertical-align;
}

// --------------------------------------------
// Custom Mixins
// --------------------------------------------

@mixin full-height {
  height: var(--window-inner-height, 100vh);
}

@mixin maskContents() {
  @include pseudo;
  inset: 0;
  mask:
    linear-gradient(#fff 0 0) content-box,
    linear-gradient(#fff 0 0);
  -webkit-mask-composite: xor;
  mask-composite: exclude;
  pointer-events: none;
  border-radius: inherit;
}

/// Scrollbar styling
@mixin scrollbar(
  $size: 6px,
  $thumb-color: rgba(0, 0, 0, 0.3),
  $track-color: rgba(0, 0, 0, 0.1)
) {
  &::-webkit-scrollbar {
    width: $size;
    height: $size;
  }

  &::-webkit-scrollbar-track {
    background: $track-color;
  }

  &::-webkit-scrollbar-thumb {
    background: $thumb-color;
    border-radius: calc($size / 2);

    &:hover {
      background: darken($thumb-color, 10%);
    }
  }
}

// responsive box
@mixin responsive-box($width, $height) {
  $padding: unquote(calc($height / $width) * 100 + "%");
  position: relative;
  display: block;
  width: 100%;
  height: 0;
  padding-top: $padding;
}
